<!DOCTYPE html>
<html>
<head>
    <title>テストアプリ</title>
    <script>
        const updateLux = async (url, element) => {
            const sensorData = await fetch(url)
                .then(response => response.json())
            const target = document.getElementById(element)
            target.innerHTML = `<h1>${sensorData.lux}</h1>`
            if (parseInt(sensorData.lux) > 1) {
                document.getElementById('side').innerText = "サイド判定"
            } else {
                document.getElementById('side').innerText = ""
            }
        }

        const autoUpdateLux = (url, element) => {
            setInterval(() => {
                updateLux(url, element)
            }, 1000)
        }

        window.onload = () => {
            autoUpdateLux('/lux', 'data')
        }
    </script>
</head>
<body>
    <center>
        <div id="data">test</div>
        <div id="side"></div> <!-- サイド判定結果を表示する要素 -->
    </center>
</body>
</html>




<!-- <!DOCTYPE html>
<html>
    <head>
        <title>テストアプリ</title>
        <script>
            const updateLux = async(url, element) => {
                const sensorData = await fetch(url)
                .then(response => response.text())
                const target = document.getElementById(element)
                target.innerHTML = `<h1>${sensorData}</h1>`
            }
        </script>
    </head>
    <body onload="updateLux('/lux','data')">
        <center>
            <div id = "data">test</div>
            <input type="button" value="更新" onclick="updateLux('/lux','data')">
        </center>
    </body>
</html> -->